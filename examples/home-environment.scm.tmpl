;; -*- mode: scheme -*-
(use-modules (gnu home)
	     (gnu home-services)
	     (gnu home-services gnupg)
	     (gnu home-services ssh)
	     (gnu home-services version-control)
	     (gnu home-services files)
	     (gnu home-services mcron)
	     (gnu services)
	     (gnu packages)
	     (gnu packages linux)
	     (gnu system keyboard)
	     (guix gexp))


;; home-gnupg-service-type
(define sample-he
  (home-environment
   (keyboard-layout
    (keyboard-layout "us,ru" "dvorak,"
		     #:options '("grp:win_space_toggle" "ctrl:nocaps")))

   ;; (symlink-name ".guix-home-env")
   (packages
    (map specification->package+output
	 '("ungoogled-chromium-wayland" "ublock-origin-chromium" "nyxt")))
   (services
    (list
     (simple-service
      'set-brightness-on-login home-run-on-first-login-service-type
      (list (file-append light "/bin/light") " -S 100\n"))

     (simple-service
      'test-config home-files-service-type
      (list `("config/test.conf"
              ,(plain-file "tmp-file.txt" "hehe"))))
     (service home-mcron-service-type
              (home-mcron-configuration
               (jobs
		(list
                 #~(job
		    next-minute-from
                    (lambda ()
                      (call-with-output-file
			  (string-append (getenv "HOME") "/tmp-mcron-test-file")
                        (lambda (port)
                          (display "Mcron service" port)))))))))
     (service home-ssh-service-type
	      (home-ssh-configuration
	       (extra-config
		(list
		 (ssh-host "savannah"
			   '((compression . #f)))))))
     (service home-gnupg-service-type
	      (home-gnupg-configuration (ssh-agent #t)))))))

sample-he
